        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>IsolateSink class / dart:isolate Library / Dart API Reference</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        <link rel="stylesheet" type="text/css"
            href="../apidoc-styles.css" />
        
        <script type="text/javascript">
          var _gaq = _gaq || [];
          _gaq.push(["_setAccount", "UA-26406144-9"]);
          _gaq.push(["_trackPageview"]);

          (function() {
            var ga = document.createElement("script");
            ga.type = "text/javascript"; ga.async = true;
            ga.src = ("https:" == document.location.protocol ?
              "https://ssl" : "http://www") + ".google-analytics.com/ga.js";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(ga, s);
          })();
        </script>
        
        </head>
        <body data-library="dart:isolate" data-type="IsolateSink">
        <div class="page">
        <div class="header">
          <a href="http://dartlang.org" ref="external"><div class="logo"></div></a>
          <a href="../index.html">Dart API Reference</a>
         &rsaquo; <a href="../dart_isolate.html">dart:isolate</a> &rsaquo; <a href="../dart_isolate/IsolateSink.html">IsolateSink</a>        <form action="http://www.dartlang.org/search.html" id="search-box">
          <input type="hidden" name="cx" value="011220921317074318178:i4mscbaxtru">
          <input type="hidden" name="ie" value="UTF-8">
          <input type="hidden" name="hl" value="en">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </form>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
<h2><div class="icon-library"></div><a href="../args.html">args</a></h2><h2><div class="icon-library"></div><a href="../dart_async.html">dart:async</a></h2><h2><div class="icon-library"></div><a href="../dart_chrome.html">dart:chrome</a></h2><h2><div class="icon-library"></div><a href="../dart_collection.html">dart:collection</a></h2><h2><div class="icon-library"></div><a href="../dart_core.html">dart:core</a></h2><h2><div class="icon-library"></div><a href="../dart_crypto.html">dart:crypto</a></h2><h2><div class="icon-library"></div><a href="../dart_html.html">dart:html</a></h2><h2><div class="icon-library"></div><a href="../dart_indexed_db.html">dart:indexed_db</a></h2><h2><div class="icon-library"></div><a href="../dart_io.html">dart:io</a></h2><h2><div class="icon-library"></div><a href="../dart_isolate.html">dart:isolate</a></h2><ul class="icon">
<li><div class="icon-class"></div><strong>IsolateSink</strong></li>
<li><a href="../dart_isolate/IsolateStream.html"><div class="icon-class"></div>IsolateStream</a></li>
<li><a href="../dart_isolate/MessageBox.html"><div class="icon-class"></div>MessageBox</a></li>
<li><a href="../dart_isolate/ReceivePort.html"><div class="icon-class"></div>ReceivePort</a></li>
<li><a href="../dart_isolate/SendPort.html"><div class="icon-class"></div>SendPort</a></li>
<li><a href="../dart_isolate/SendPortSync.html"><div class="icon-class"></div>SendPortSync</a></li>
<li><a href="../dart_isolate/IsolateSpawnException.html"><div class="icon-exception"></div>IsolateSpawnException</a></li>
<li><a href="../dart_isolate/IsolateUnhandledException.html"><div class="icon-exception"></div>IsolateUnhandledException</a></li>
</ul>
<h2><div class="icon-library"></div><a href="../dart_json.html">dart:json</a></h2><h2><div class="icon-library"></div><a href="../dart_math.html">dart:math</a></h2><h2><div class="icon-library"></div><a href="../dart_mirrors.html">dart:mirrors</a></h2><h2><div class="icon-library"></div><a href="../dart_scalarlist.html">dart:scalarlist</a></h2><h2><div class="icon-library"></div><a href="../dart_svg.html">dart:svg</a></h2><h2><div class="icon-library"></div><a href="../dart_uri.html">dart:uri</a></h2><h2><div class="icon-library"></div><a href="../dart_utf.html">dart:utf</a></h2><h2><div class="icon-library"></div><a href="../dart_web_audio.html">dart:web_audio</a></h2><h2><div class="icon-library"></div><a href="../dart_web_sql.html">dart:web_sql</a></h2><h2><div class="icon-library"></div><a href="../fixnum.html">fixnum</a></h2><h2><div class="icon-library"></div><a href="../intl.html">intl</a></h2><h2><div class="icon-library"></div><a href="../logging.html">logging</a></h2><h2><div class="icon-library"></div><a href="../matcher.html">matcher</a></h2><h2><div class="icon-library"></div><a href="../meta.html">meta</a></h2><h2><div class="icon-library"></div><a href="../mock.html">mock</a></h2><h2><div class="icon-library"></div><a href="../scheduled_test.html">scheduled_test</a></h2><h2><div class="icon-library"></div><a href="../serialization.html">serialization</a></h2><h2><div class="icon-library"></div><a href="../unittest.html">unittest</a></h2></div>
<div class="content">
        <h2><strong>IsolateSink</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<p><a class="crossref" href="../dart_isolate/IsolateSink.html">IsolateSink</a>s represent the feed for <a class="crossref" href="../dart_isolate/IsolateStream.html">IsolateStream</a>s. Any message written
to <code>this</code> is delivered to its respective <a class="crossref" href="../dart_isolate/IsolateStream.html">IsolateStream</a>. <a class="crossref" href="../dart_isolate/IsolateSink.html">IsolateSink</a>s are
created by <a class="crossref" href="../dart_isolate/MessageBox.html">MessageBox</a>es.</p>
<p><a class="crossref" href="../dart_isolate/IsolateSink.html">IsolateSink</a>s can be transmitted to other isolates.</p>
<pre class="source">
class IsolateSink extends StreamSink&lt;dynamic&gt; {
 bool _isClosed = false;
 final SendPort _port;
 IsolateSink._fromPort(this._port);

 /**
  * Sends an asynchronous [message] to the linked [IsolateStream]. The message
  * is copied to the receiving isolate.
  *
  * The content of [message] can be: primitive values (null, num, bool, double,
  * String), instances of [IsolateSink]s, and lists and maps whose elements are
  * any of these. List and maps are also allowed to be cyclic.
  *
  * In the special circumstances when two isolates share the same code and are
  * running in the same process (e.g. isolates created via [spawnFunction]), it
  * is also possible to send object instances (which would be copied in the
  * process). This is currently only supported by the dartvm.  For now, the
  * dart2js compiler only supports the restricted messages described above.
  */
 void add(dynamic message) {
   var mangled = _mangleMessage(message);
   _port.send(mangled);
 }

 void signalError(AsyncError errorEvent) {
   throw new UnimplementedError("signalError on isolate streams");
 }

 dynamic _mangleMessage(var message) {
   _IsolateEncoder encoder = new _IsolateEncoder(
       _ISOLATE_STREAM_TOKEN,
       (data) {
         if (data is IsolateSink) return ["Sink", data._port];
         if (identical(data, const _CloseToken())) return ["Close"];
         return data;
       });
   return encoder.encode(message);
 }

 void close() {
   if (_isClosed) throw new StateError("Sending on closed stream");
   add(const _CloseToken());
   _isClosed = true;
 }

 /**
  * Tests whether [other] is an [IsolateSink] feeding into the same
  * [IsolateStream] as this one.
  */
 bool operator==(var other) {
   return other is IsolateSink &amp;&amp; _port == other._port;
 }

 int get hashCode =&gt; _port.hashCode + 499;
}
</pre>
</div>
<h3>Extends</h3>
<p>
<span class="type-box"><span class="icon-class"></span><a href="../dart_async/StreamSink.html">StreamSink&lt;dynamic&gt;</a></span>&nbsp;&gt;&nbsp;<span class="type-box"><span class="icon-class"></span><strong>IsolateSink</strong></span></p>
<div>
<h3>Properties</h3>
<div class="field"><h4 id="hashCode">
<button class="show-code">Code</button>
final <a href="../dart_core/int.html">int</a>         <strong>hashCode</strong> <a class="anchor-link"
            href="#hashCode"
            title="Permalink to IsolateSink.hashCode">#</a>
        </h4>
        <div class="doc">
<div class="inherited">
<p>Get a hash code for this object.</p>
<p>All objects have hash codes. Hash codes are guaranteed to be the
same for objects that are equal when compared using the equality
operator <code>==</code>. Other than that there are no guarantees about
the hash codes. They will not be consistent between runs and
there are no distribution guarantees.</p>
<p>If a subclass overrides <a class="crossref" href="../dart_isolate/IsolateSink.html#hashCode">hashCode</a> it should override the
equality operator as well to maintain consistency.</p>
<div class="docs-inherited-from">docs inherited from <a href="../dart_core/Object.html">Object</a> </div></div>
<pre class="source">
int get hashCode =&gt; _port.hashCode + 499;
</pre>
</div>
</div>
</div>
<div>
<h3>Operators</h3>
<div class="method"><h4 id="==">
<button class="show-code">Code</button>
<a href="../dart_core/bool.html">bool</a> <strong>operator ==</strong>(other) <a class="anchor-link" href="#=="
              title="Permalink to IsolateSink.operator ==">#</a></h4>
<div class="doc">
<p>Tests whether 
<span class="param">other</span> is an <a class="crossref" href="../dart_isolate/IsolateSink.html">IsolateSink</a> feeding into the same
<a class="crossref" href="../dart_isolate/IsolateStream.html">IsolateStream</a> as this one.</p>
<pre class="source">
bool operator==(var other) {
 return other is IsolateSink &amp;&amp; _port == other._port;
}
</pre>
</div>
</div>
</div>
<div>
<h3>Methods</h3>
<div class="method"><h4 id="add">
<button class="show-code">Code</button>
void <strong>add</strong>(message) <a class="anchor-link" href="#add"
              title="Permalink to IsolateSink.add">#</a></h4>
<div class="doc">
<p>Sends an asynchronous 
<span class="param">message</span> to the linked <a class="crossref" href="../dart_isolate/IsolateStream.html">IsolateStream</a>. The message
is copied to the receiving isolate.</p>
<p>The content of 
<span class="param">message</span> can be: primitive values (null, num, bool, double,
String), instances of <a class="crossref" href="../dart_isolate/IsolateSink.html">IsolateSink</a>s, and lists and maps whose elements are
any of these. List and maps are also allowed to be cyclic.</p>
<p>In the special circumstances when two isolates share the same code and are
running in the same process (e.g. isolates created via <a class="crossref" href="../dart.isolate.html#spawnFunction">spawnFunction</a>), it
is also possible to send object instances (which would be copied in the
process). This is currently only supported by the dartvm.  For now, the
dart2js compiler only supports the restricted messages described above.</p>
<pre class="source">
void add(dynamic message) {
 var mangled = _mangleMessage(message);
 _port.send(mangled);
}
</pre>
</div>
</div>
<div class="method"><h4 id="close">
<button class="show-code">Code</button>
void <strong>close</strong>() <a class="anchor-link" href="#close"
              title="Permalink to IsolateSink.close">#</a></h4>
<div class="doc">
<pre class="source">
void close() {
 if (_isClosed) throw new StateError("Sending on closed stream");
 add(const _CloseToken());
 _isClosed = true;
}
</pre>
</div>
</div>
<div class="method"><h4 id="signalError">
<button class="show-code">Code</button>
void <strong>signalError</strong>(<a href="../dart_async/AsyncError.html">AsyncError</a> errorEvent) <a class="anchor-link" href="#signalError"
              title="Permalink to IsolateSink.signalError">#</a></h4>
<div class="doc">
<div class="inherited">
<p>Signal an async error to the receivers of this sink's values. </p>
<div class="docs-inherited-from">docs inherited from <a href="../dart_async/StreamSink.html">StreamSink</a>&lt;dynamic&gt; </div></div>
<pre class="source">
void signalError(AsyncError errorEvent) {
 throw new UnimplementedError("signalError on isolate streams");
}
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          <div>This page was generated at 2013-02-26 14:52:10.367</div>
<div>        <p>Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>, the content of this
        page is licensed under the <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution
        3.0 License</a>, and code samples are licensed under the
        <a href="http://code.google.com/google_bsd_license.html">BSD License</a>.</p>
        <p><a href="http://www.dartlang.org/tos.html">Terms of Service</a> |
        <a href="http://www.google.com/intl/en/privacy/privacy-policy.html">Privacy Policy</a></p>
        </div>
        </div>
        <script async src="../client-static.js"></script>
        </body></html>
        
